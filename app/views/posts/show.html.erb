<h2><%= @post.title %></h2>
<p><%= @post.description %></p>
<p>Author: <%= @post.user.email %></p>
<hr>

<% if can? :update, @post %>
    <%= link_to 'Edit', edit_post_path(@post), :class => 'btn btn-warning' %>
<% end %>
<% if can? :destroy, @post %>
    <%= link_to 'Delete', post_path(@post), method: :delete, data: {confirm: "Are you sure?"}, :class => 'btn btn-danger' %>
<% end %>
<%= link_to 'Back', posts_path, :class => 'btn btn-primary' %>
<hr>

<% unless @post.comments.empty? %>
    <h2>Comments:</h2>
    <% @post.comments.each do |comment| %>
        <p><strong><%= comment.user.email %></strong>: <%= comment.body %>
        <% if can? :update, comment %>
            <%= link_to 'Edit', edit_post_comment_path(@post, comment) %>
        <% end %>
        <% if can? :destroy, comment %>
            <%= link_to 'Delete', post_comment_path(@post, comment), method: :delete %>
        <% end %>
        </p>
    <% end %>
    <hr>
<% end %>

<h2>Comment</h2>
<%= form_for([@post, @post.comments.build]) do |f| %>
    <p><%= f.text_area(:body, {:class => 'form-control'}) %></p>
    <p><%= f.submit("Comment", {:class => 'btn btn-warning'}) %></p>
<% end %>
